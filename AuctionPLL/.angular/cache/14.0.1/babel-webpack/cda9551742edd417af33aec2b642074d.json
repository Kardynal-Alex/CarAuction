{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { CommonConstants } from 'src/app/common/constants/common-constants';\nimport { RegisterComponent } from '../register/register.component';\nimport { ForgotPasswordComponent } from '../forgot-password/forgot-password.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/auth.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../services/local-storage.service\";\nimport * as i5 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"../facebook-login/facebook-login.component\";\nimport * as i9 from \"../google-login/google-login.component\";\n\nfunction LoginComponent_p_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 13);\n    i0.ɵɵtext(1, \" email is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 13);\n    i0.ɵɵtext(1, \" Incorect email\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_p_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 13);\n    i0.ɵɵtext(1, \" password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_p_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 13);\n    i0.ɵɵtext(1, \" Min length 6\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, toastrService, router, localStorage, modalService, activeModal, formBuilder) {\n      this.authService = authService;\n      this.toastrService = toastrService;\n      this.router = router;\n      this.localStorage = localStorage;\n      this.modalService = modalService;\n      this.activeModal = activeModal;\n      this.formBuilder = formBuilder;\n      this.isAuth = false;\n      this.initLoginForm();\n    }\n\n    ngOnInit() {\n      this.isAuth = this.authService.isAuthenticated();\n    }\n\n    initLoginForm() {\n      this.loginForm = this.formBuilder.group({\n        email: [null, [Validators.required, Validators.email]],\n        password: [null, [Validators.required, Validators.minLength(6)]]\n      });\n    }\n\n    ngDoCheck() {\n      this.isAuth = this.authService.isAuthenticated();\n    }\n\n    login() {\n      const loginUser = this.loginForm.value;\n      this.authService.login(loginUser).subscribe(response => {\n        if (response['is2StepVerificationRequired']) {\n          this.activeModal.close();\n          this.router.navigate(['/auth/twostepverification'], {\n            queryParams: {\n              provider: response['provider'],\n              email: loginUser.email\n            }\n          });\n        } else {\n          let errorMessage = response['errorMessage'];\n\n          if (!!errorMessage) {\n            this.toastrService.error(errorMessage);\n            this.activeModal.close();\n            this.modalService.open(ForgotPasswordComponent, {\n              animation: false\n            });\n          } else {\n            this.toastrService.success('Login successfully.');\n            this.activeModal.close();\n            const token = response.token;\n            this.localStorage.set(CommonConstants.JWTToken, JSON.stringify(token));\n            this.isAuth = true;\n            window.location.reload();\n          }\n        }\n      }, _ => {\n        this.toastrService.error('Incorect login or password!');\n      });\n    }\n\n    openRegisterForm() {\n      this.activeModal.close();\n      this.modalService.open(RegisterComponent, {\n        animation: false\n      });\n    }\n\n    openResetForm() {\n      this.activeModal.close();\n      this.modalService.open(ForgotPasswordComponent, {\n        animation: false\n      });\n    }\n\n    close() {\n      this.activeModal.close();\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.LocalStorageService), i0.ɵɵdirectiveInject(i5.NgbModal), i0.ɵɵdirectiveInject(i5.NgbActiveModal), i0.ɵɵdirectiveInject(i6.UntypedFormBuilder));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 32,\n    vars: 6,\n    consts: [[\"rel\", \"stylesheet\", \"href\", \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"], [1, \"login-form\"], [1, \"login-content\"], [\"title\", \"Close Modal\", 1, \"close\", 3, \"click\"], [1, \"container\", 3, \"formGroup\"], [1, \"has-tooltip\"], [\"type\", \"text\", \"placeholder\", \"Enter email\", \"name\", \"email\", \"formControlName\", \"email\", \"email\", \"\"], [\"class\", \"tooltip\", 4, \"ngIf\"], [\"type\", \"password\", \"placeholder\", \"Enter password\", \"name\", \"email\", \"formControlName\", \"password\"], [3, \"disabled\", \"click\"], [1, \"regis-btn\"], [1, \"underline\", 3, \"click\"], [1, \"center\"], [1, \"tooltip\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"link\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\")(4, \"span\", 3);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_span_click_4_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵtext(5, \"\\u00D7\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 4)(7, \"p\");\n        i0.ɵɵtext(8, \"Sign in\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵelement(10, \"input\", 6);\n        i0.ɵɵtemplate(11, LoginComponent_p_11_Template, 2, 0, \"p\", 7);\n        i0.ɵɵtemplate(12, LoginComponent_p_12_Template, 2, 0, \"p\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 5);\n        i0.ɵɵelement(14, \"input\", 8);\n        i0.ɵɵtemplate(15, LoginComponent_p_15_Template, 2, 0, \"p\", 7);\n        i0.ɵɵtemplate(16, LoginComponent_p_16_Template, 2, 0, \"p\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_17_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵtext(18, \"Login\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 10)(20, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_20_listener() {\n          return ctx.openResetForm();\n        });\n        i0.ɵɵelementStart(21, \"p\");\n        i0.ɵɵtext(22, \"Forgot password?\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"div\", 12);\n        i0.ɵɵelement(24, \"app-facebook-login\")(25, \"app-google-login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 10)(27, \"p\");\n        i0.ɵɵtext(28, \"Need to create an account? \");\n        i0.ɵɵelementStart(29, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_29_listener() {\n          return ctx.openRegisterForm();\n        });\n        i0.ɵɵelementStart(30, \"p\");\n        i0.ɵɵtext(31, \"Sign up here\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", (ctx.loginForm.controls.email.errors == null ? null : ctx.loginForm.controls.email.errors.required) && ctx.loginForm.controls.email.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.loginForm.controls.email.errors == null ? null : ctx.loginForm.controls.email.errors.email) && ctx.loginForm.controls.email.touched);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", (ctx.loginForm.controls.password.errors == null ? null : ctx.loginForm.controls.password.errors.required) && ctx.loginForm.controls.password.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.loginForm.controls.password.errors == null ? null : ctx.loginForm.controls.password.errors.minlength) && ctx.loginForm.controls.password.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid);\n      }\n    },\n    dependencies: [i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.EmailValidator, i7.NgIf, i6.FormGroupDirective, i6.FormControlName, i8.FacebookLoginComponent, i9.GoogleLoginComponent],\n    styles: [\"[_nghost-%COMP%]   body[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;outline:none}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]{text-align:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#0006;padding-top:60px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:5% auto 15%;border:1px solid #888;width:30%;border-radius:40px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:relative;float:right;top:25px;color:#000;font-size:35px;font-weight:700;right:25px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:red;cursor:pointer}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:40px 40px 10px;text-align:center}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:30px;font-weight:600}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{padding:12px 20px;margin:8px auto;display:inline-block;border:1px solid #ccc;box-sizing:border-box}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[type=text].ng-touched.ng-invalid[_ngcontent-%COMP%], [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[type=password].ng-touched.ng-invalid[_ngcontent-%COMP%]{border:solid red 2px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[type=text].ng-touched.ng-valid[_ngcontent-%COMP%], [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[type=password].ng-touched.ng-valid[_ngcontent-%COMP%]{border:solid green 2px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18px;border-radius:30px;width:80%}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .has-tooltip[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .has-tooltip[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{text-align:center;font-size:16px;position:absolute;top:0%;left:50%;transform:translate(-50%);background-color:#292929;color:#fff;padding:4px 6px;border-radius:4px;width:max-content;opacity:0;visibility:hidden}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .has-tooltip[_ngcontent-%COMP%]:where(:hover, [_ngcontent-%COMP%]:focus-within) > .tooltip[_ngcontent-%COMP%]{opacity:1;visibility:visible}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;padding:14px 20px;margin:8px 0;border:none;cursor:pointer}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8;border-radius:30px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .regis-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:auto;background:none;color:#000;border:none}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .regis-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{width:auto;background:none;color:#000}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .regis-btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .regis-btn[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:underline;font-size:18px}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}