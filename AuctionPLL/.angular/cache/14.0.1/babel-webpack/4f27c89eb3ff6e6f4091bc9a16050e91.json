{"ast":null,"code":"import { UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-toastr\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"src/app/services/lot.service\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i5 from \"@angular/forms\";\nexport let AskOwnerFormComponent = /*#__PURE__*/(() => {\n  class AskOwnerFormComponent {\n    constructor(toastrService, authService, lotService, activeModal) {\n      this.toastrService = toastrService;\n      this.authService = authService;\n      this.lotService = lotService;\n      this.activeModal = activeModal;\n      this.myForm = new UntypedFormGroup({\n        ownerEmail: new UntypedFormControl(''),\n        text: new UntypedFormControl('', [Validators.required]),\n        fullName: new UntypedFormControl('', [Validators.required, Validators.minLength(2)]),\n        userEmail: new UntypedFormControl('')\n      });\n    }\n\n    ngOnInit() {}\n\n    onSubmit() {\n      if (!this.myForm.invalid) {\n        const askOwner = {\n          ownerEmail: this.ownerEmail,\n          text: this.myForm.controls['text'].value,\n          fullName: this.myForm.controls['fullName'].value,\n          userEmail: this.authService.getUserEmailFromToken()\n        };\n        this.lotService.askOwner(askOwner).subscribe(_ => {\n          this.close();\n          this.toastrService.success('Message is sended to owner');\n          this.myForm.reset();\n        }, _ => {\n          this.toastrService.error('some data is incorect');\n        });\n      }\n    }\n\n    close() {\n      this.activeModal.close();\n    }\n\n  }\n\n  AskOwnerFormComponent.ɵfac = function AskOwnerFormComponent_Factory(t) {\n    return new (t || AskOwnerFormComponent)(i0.ɵɵdirectiveInject(i1.ToastrService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.LotService), i0.ɵɵdirectiveInject(i4.NgbActiveModal));\n  };\n\n  AskOwnerFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AskOwnerFormComponent,\n    selectors: [[\"app-ask-owner-form\"]],\n    inputs: {\n      ownerEmail: \"ownerEmail\"\n    },\n    decls: 16,\n    vars: 1,\n    consts: [[1, \"chat-popup\"], [1, \"form-container\", 3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"placeholder\", \"Type fullname..\", \"formControlName\", \"fullName\"], [\"placeholder\", \"Type message...\", \"formControlName\", \"text\", \"required\", \"\"], [1, \"btn\"], [1, \"btn\", \"cancel\", 3, \"click\"]],\n    template: function AskOwnerFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function AskOwnerFormComponent_Template_form_ngSubmit_1_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(2, \"h1\");\n        i0.ɵɵtext(3, \"Chat\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"label\")(5, \"b\");\n        i0.ɵɵtext(6, \"FullName\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(7, \"input\", 2);\n        i0.ɵɵelementStart(8, \"label\")(9, \"b\");\n        i0.ɵɵtext(10, \"Message\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(11, \"textarea\", 3);\n        i0.ɵɵelementStart(12, \"button\", 4);\n        i0.ɵɵtext(13, \"Send\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function AskOwnerFormComponent_Template_button_click_14_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵtext(15, \"Close\");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.myForm);\n      }\n    },\n    dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.FormGroupDirective, i5.FormControlName],\n    styles: [\"[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;outline:none}[_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]{position:fixed;bottom:0;right:15px;border:3px solid #f1f1f1;z-index:9;border-radius:20px}[_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:340px;padding:10px;background-color:#fff;border-radius:20px}[_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:15px;background:#f1f1f1;border-radius:20px;border:none;font-size:16px}[_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#ddd;outline:none}[_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{margin:5px 0 22px;resize:none;min-height:200px}[_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;padding:16px 20px;border:none;cursor:pointer;width:100%;margin-bottom:10px;opacity:.8;border-radius:20px}[_nghost-%COMP%]   .chat-popup[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.cancel[_ngcontent-%COMP%]{background-color:red;border-radius:20px}\"]\n  });\n  return AskOwnerFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}